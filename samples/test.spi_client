# -*- coding: iso-8859-1 -*-

from __future__ import print_function, division
import	sys
if( sys.version_info[0] == 2 ):
	range = xrange

import	qm3.utils.spi
import	time
import	random
import	math
import	os

random.seed()
com = qm3.utils.spi.client( sys.argv[1] )
time.sleep( random.randint( 1, 10 ) )
com.barrier()
vec = [ float( com.node ) * float( i ) for i in range( 10 ) ]
com.send_r8( vec )
time.sleep( random.randint( 1, 10 ) )
cev = com.recv_r8( 10 )
print( com.node, sum( [ math.fabs( i - j ) for i,j in zip( vec, cev ) ] ) )
com.barrier()
com.stop()
